{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Metadata for IGSN Records - Link Headers\n",
    "\n",
    "Given an IGSN value, get metadata about the resource identified by the IGSN when the \n",
    "resolved resource uses Link Headers[<sup>[1](#fn1),[2](#fn2)</sup>] to identify locations where alternate serializations of the resolved entity may be retrieved.\n",
    "\n",
    "This example examines the HTTP responses encountered when resolving an IGSN and how to retrieve the resolved content in different serializations given the hints provided by the resource server.\n",
    "\n",
    "\n",
    "1. <span id=\"fn1\">https://tools.ietf.org/html/rfc8288</span>\n",
    "2. <span id=\"fn2\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Link</span>"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## HTTP Requests During Resolution"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "HTTP redirections in resolution process:\n",
      "  0: 301 http://igsn.org/AU1547827\n",
      "  1: 302 http://hdl.handle.net/10273/AU1547827\n",
      "  2: 302 http://www.ga.gov.au/sample-catalogue/10273/AU1547827\n",
      "  3: 200 http://pid.geoscience.gov.au/sample/AU1547827\n"
     ]
    }
   ],
   "source": [
    "import pprint\n",
    "import igsn_lib.oai\n",
    "\n",
    "igsn_val = \"AU1547827\"\n",
    "\n",
    "responses = igsn_lib.resolve(igsn_val)\n",
    "print(\"HTTP redirections in resolution process:\")\n",
    "for i in range(len(responses)):\n",
    "    print(f\"{i:>3}: {responses[i].status_code} {responses[i].url}\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In this case the resolution process requires 4 seperate HTTP calls starting with a request to `http://igsn.org/AU1547827` and ending up at `http://pid.geoscience.gov.au/sample/AU1547827`. These steps are normally hidden when accessing a resource with a web browser with the user presented with the default response provided by the web server handing the final response. Using a web browser to visit the resolution URL for an IGSN will typically result in a human readable web page like:\n",
    "\n",
    "![](assets/2020-10-30_11-03-00.png)\n",
    "\n",
    "## HTTP Response Headers\n",
    "\n",
    "The HTTP response includes hints for the consumer to access the same information expressed with different profiles in different formats. For this server, those hints are expressed in the `Link` HTTP header in the response.\n",
    "\n",
    "Looking at the raw HTTP response headers from each step in the resolution process, it can be seen there is a series of redirects using `Location` headers and corresponding HTTP `30x` status codes. The final response from the resource server provides the `Link` header: "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "  0: 301 http://igsn.org/AU1547827\n",
      "      Server : nginx/1.14.1\n",
      "        Date : Fri, 30 Oct 2020 16:09:50 GMT\n",
      "Content-Type : text/html; charset=iso-8859-1\n",
      "  Connection : keep-alive\n",
      "    Location : http://hdl.handle.net/10273/AU1547827\n",
      "---\n",
      "  1: 302 http://hdl.handle.net/10273/AU1547827\n",
      "    Location : http://www.ga.gov.au/sample-catalogue/10273/AU1547827\n",
      "     Expires : Sat, 31 Oct 2020 16:09:51 GMT\n",
      "Content-Type : text/html;charset=utf-8\n",
      "Content-Length : 191\n",
      "        Date : Fri, 30 Oct 2020 16:09:50 GMT\n",
      "---\n",
      "  2: 302 http://www.ga.gov.au/sample-catalogue/10273/AU1547827\n",
      "        Date : Fri, 30 Oct 2020 16:09:51 GMT\n",
      "      Server : Apache/2.2.11 (Unix) mod_ssl/2.2.11 OpenSSL/0.9.7d DAV/2 mod_jk/1.2.27\n",
      "    Location : http://pid.geoscience.gov.au/sample/AU1547827\n",
      "        Vary : Accept-Encoding\n",
      "Content-Encoding : gzip\n",
      "Content-Length : 20\n",
      "Content-Type : text/html; charset=iso-8859-1\n",
      "---\n",
      "  3: 200 http://pid.geoscience.gov.au/sample/AU1547827\n",
      "        Date : Fri, 30 Oct 2020 16:09:52 GMT\n",
      "Content-Type : text/html\n",
      "Content-Length : 6162\n",
      "  Connection : keep-alive\n",
      "      Server : Apache\n",
      "      Pragma : no-cache\n",
      "Cache-Control : no-cache, no-store, private, must-revalidate, max-stale=0, post-check=0, pre-check=0\n",
      "     Expires : Thu, 01 Jan 1970 00:00:00 GMT\n",
      "Content-Profile : <http://pid.geoscience.gov.au/def/ont/ga/igsn>\n",
      "Content-Language : en\n",
      "        Link : <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"csirov3\"; anchor=<https://confluence.csiro.au/display/AusIGSN/CSIRO+IGSN+IMPLEMENTATION>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"dct\"; anchor=<http://purl.org/dc/terms/>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"igsn\"; anchor=<http://schema.igsn.org/description/>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"igsn-r1\"; anchor=<http://schema.igsn.org/description/1.0>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"igsn-o\"; anchor=<http://pid.geoscience.gov.au/def/ont/ga/igsn>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"prov\"; anchor=<http://www.w3.org/ns/prov/>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"sosa\"; anchor=<http://www.w3.org/ns/sosa/>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"alternates\"; anchor=<https://w3id.org/profile/alt>, <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"all\"; anchor=<http://www.w3.org/ns/dx/conneg/altr>, <http://pid.geoscience.gov.au/sample/AU1547827?_view=csirov3&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"https://confluence.csiro.au/display/AusIGSN/CSIRO+IGSN+IMPLEMENTATION\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/xml>; rel=\"alternate\"; type=\"application/xml\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n3>; rel=\"alternate\"; type=\"text/n3\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n-triples>; rel=\"alternate\"; type=\"text/n-triples\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"http://purl.org/dc/terms/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"http://schema.igsn.org/description/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-r1&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"http://schema.igsn.org/description/1.0\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=text/html>; rel=\"self\"; type=\"text/html\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"http://www.w3.org/ns/prov/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://www.w3.org/ns/prov/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://www.w3.org/ns/prov/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://www.w3.org/ns/prov/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://www.w3.org/ns/sosa/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://www.w3.org/ns/sosa/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://www.w3.org/ns/sosa/\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"https://w3id.org/profile/alt\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/json>; rel=\"alternate\"; type=\"application/json\"; profile=\"https://w3id.org/profile/alt\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"https://w3id.org/profile/alt\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"https://w3id.org/profile/alt\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"https://w3id.org/profile/alt\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/n3>; rel=\"alternate\"; type=\"text/n3\"; profile=\"https://w3id.org/profile/alt\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/n-triples>; rel=\"alternate\"; type=\"application/n-triples\"; profile=\"https://w3id.org/profile/alt\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/json>; rel=\"alternate\"; type=\"application/json\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/n3>; rel=\"alternate\"; type=\"text/n3\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\", <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/n-triples>; rel=\"alternate\"; type=\"application/n-triples\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\", <http://pid.geoscience.gov.au/sample/AU1547827/pingback>; rel=\"http://www.w3.org/ns/prov#pingback\"\n",
      "        Vary : Accept-Encoding\n",
      "---\n"
     ]
    }
   ],
   "source": [
    "for i in range(len(responses)):\n",
    "    print(f\"{i:>3}: {responses[i].status_code} {responses[i].url}\")\n",
    "    for k,v in responses[i].headers.items():\n",
    "        print(f\"{k:>12} : {v}\")\n",
    "    print(\"---\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## RFC8288 `Link` Header\n",
    "\n",
    "The final response from `http://pid.geoscience.gov.au/sample/AU1547827` returns a lengthy `Link` HTTP header. The value of this header can be parsed according to the guidelines of RFC8288. This basically entails first splitting the value by comma to get individual entries in the header:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"csirov3\"; anchor=<https://confluence.csiro.au/display/AusIGSN/CSIRO+IGSN+IMPLEMENTATION>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"dct\"; anchor=<http://purl.org/dc/terms/>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"igsn\"; anchor=<http://schema.igsn.org/description/>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"igsn-r1\"; anchor=<http://schema.igsn.org/description/1.0>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"igsn-o\"; anchor=<http://pid.geoscience.gov.au/def/ont/ga/igsn>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"prov\"; anchor=<http://www.w3.org/ns/prov/>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"sosa\"; anchor=<http://www.w3.org/ns/sosa/>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"alternates\"; anchor=<https://w3id.org/profile/alt>\n",
      " <http://www.w3.org/ns/dx/prof/Profile>; rel=\"type\"; token=\"all\"; anchor=<http://www.w3.org/ns/dx/conneg/altr>\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=csirov3&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"https://confluence.csiro.au/display/AusIGSN/CSIRO+IGSN+IMPLEMENTATION\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/xml>; rel=\"alternate\"; type=\"application/xml\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n3>; rel=\"alternate\"; type=\"text/n3\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n-triples>; rel=\"alternate\"; type=\"text/n-triples\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"http://purl.org/dc/terms/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"http://schema.igsn.org/description/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-r1&_format=text/xml>; rel=\"alternate\"; type=\"text/xml\"; profile=\"http://schema.igsn.org/description/1.0\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=text/html>; rel=\"self\"; type=\"text/html\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://pid.geoscience.gov.au/def/ont/ga/igsn\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"http://www.w3.org/ns/prov/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://www.w3.org/ns/prov/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://www.w3.org/ns/prov/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://www.w3.org/ns/prov/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://www.w3.org/ns/sosa/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://www.w3.org/ns/sosa/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://www.w3.org/ns/sosa/\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"https://w3id.org/profile/alt\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/json>; rel=\"alternate\"; type=\"application/json\"; profile=\"https://w3id.org/profile/alt\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"https://w3id.org/profile/alt\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"https://w3id.org/profile/alt\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"https://w3id.org/profile/alt\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/n3>; rel=\"alternate\"; type=\"text/n3\"; profile=\"https://w3id.org/profile/alt\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/n-triples>; rel=\"alternate\"; type=\"application/n-triples\"; profile=\"https://w3id.org/profile/alt\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/html>; rel=\"alternate\"; type=\"text/html\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/json>; rel=\"alternate\"; type=\"application/json\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/turtle>; rel=\"alternate\"; type=\"text/turtle\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/rdf+xml>; rel=\"alternate\"; type=\"application/rdf+xml\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/ld+json>; rel=\"alternate\"; type=\"application/ld+json\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/n3>; rel=\"alternate\"; type=\"text/n3\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/n-triples>; rel=\"alternate\"; type=\"application/n-triples\"; profile=\"http://www.w3.org/ns/dx/conneg/altr\"\n",
      " <http://pid.geoscience.gov.au/sample/AU1547827/pingback>; rel=\"http://www.w3.org/ns/prov#pingback\"\n"
     ]
    }
   ],
   "source": [
    "link_header_value = responses[-1].headers.get('Link')\n",
    "entries = link_header_value.split(\",\")\n",
    "for entry in entries:\n",
    "    print(entry)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Then splitting each entry using the semi-colon as a delimiter. The first value is a URI, the remaining values are `key=value` pairs. The entire header can thus be parsed to a list of URIs with associated `key=value` entries. The following method provide a mechanism to parse the Link header value and print out the resulting entries."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=csirov3&_format=text/xml:\n",
      "      rel: alternate\n",
      "      type: text/xml\n",
      "      profile: https://confluence.csiro.au/display/AusIGSN/CSIRO+IGSN+IMPLEMENTATION\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/html:\n",
      "      rel: alternate\n",
      "      type: text/html\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/turtle:\n",
      "      rel: alternate\n",
      "      type: text/turtle\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/rdf+xml:\n",
      "      rel: alternate\n",
      "      type: application/rdf+xml\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/ld+json:\n",
      "      rel: alternate\n",
      "      type: application/ld+json\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/xml:\n",
      "      rel: alternate\n",
      "      type: application/xml\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n3:\n",
      "      rel: alternate\n",
      "      type: text/n3\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n-triples:\n",
      "      rel: alternate\n",
      "      type: text/n-triples\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/xml:\n",
      "      rel: alternate\n",
      "      type: text/xml\n",
      "      profile: http://purl.org/dc/terms/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn&_format=text/xml:\n",
      "      rel: alternate\n",
      "      type: text/xml\n",
      "      profile: http://schema.igsn.org/description/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-r1&_format=text/xml:\n",
      "      rel: alternate\n",
      "      type: text/xml\n",
      "      profile: http://schema.igsn.org/description/1.0\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=text/html:\n",
      "      rel: self\n",
      "      type: text/html\n",
      "      profile: http://pid.geoscience.gov.au/def/ont/ga/igsn\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=text/turtle:\n",
      "      rel: alternate\n",
      "      type: text/turtle\n",
      "      profile: http://pid.geoscience.gov.au/def/ont/ga/igsn\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/rdf+xml:\n",
      "      rel: alternate\n",
      "      type: application/rdf+xml\n",
      "      profile: http://pid.geoscience.gov.au/def/ont/ga/igsn\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/ld+json:\n",
      "      rel: alternate\n",
      "      type: application/ld+json\n",
      "      profile: http://pid.geoscience.gov.au/def/ont/ga/igsn\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/html:\n",
      "      rel: alternate\n",
      "      type: text/html\n",
      "      profile: http://www.w3.org/ns/prov/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/turtle:\n",
      "      rel: alternate\n",
      "      type: text/turtle\n",
      "      profile: http://www.w3.org/ns/prov/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/rdf+xml:\n",
      "      rel: alternate\n",
      "      type: application/rdf+xml\n",
      "      profile: http://www.w3.org/ns/prov/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/ld+json:\n",
      "      rel: alternate\n",
      "      type: application/ld+json\n",
      "      profile: http://www.w3.org/ns/prov/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=text/turtle:\n",
      "      rel: alternate\n",
      "      type: text/turtle\n",
      "      profile: http://www.w3.org/ns/sosa/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/rdf+xml:\n",
      "      rel: alternate\n",
      "      type: application/rdf+xml\n",
      "      profile: http://www.w3.org/ns/sosa/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/ld+json:\n",
      "      rel: alternate\n",
      "      type: application/ld+json\n",
      "      profile: http://www.w3.org/ns/sosa/\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/html:\n",
      "      rel: alternate\n",
      "      type: text/html\n",
      "      profile: https://w3id.org/profile/alt\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/json:\n",
      "      rel: alternate\n",
      "      type: application/json\n",
      "      profile: https://w3id.org/profile/alt\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/turtle:\n",
      "      rel: alternate\n",
      "      type: text/turtle\n",
      "      profile: https://w3id.org/profile/alt\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/rdf+xml:\n",
      "      rel: alternate\n",
      "      type: application/rdf+xml\n",
      "      profile: https://w3id.org/profile/alt\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/ld+json:\n",
      "      rel: alternate\n",
      "      type: application/ld+json\n",
      "      profile: https://w3id.org/profile/alt\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/n3:\n",
      "      rel: alternate\n",
      "      type: text/n3\n",
      "      profile: https://w3id.org/profile/alt\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/n-triples:\n",
      "      rel: alternate\n",
      "      type: application/n-triples\n",
      "      profile: https://w3id.org/profile/alt\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/html:\n",
      "      rel: alternate\n",
      "      type: text/html\n",
      "      profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/json:\n",
      "      rel: alternate\n",
      "      type: application/json\n",
      "      profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/turtle:\n",
      "      rel: alternate\n",
      "      type: text/turtle\n",
      "      profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/rdf+xml:\n",
      "      rel: alternate\n",
      "      type: application/rdf+xml\n",
      "      profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/ld+json:\n",
      "      rel: alternate\n",
      "      type: application/ld+json\n",
      "      profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/n3:\n",
      "      rel: alternate\n",
      "      type: text/n3\n",
      "      profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/n-triples:\n",
      "      rel: alternate\n",
      "      type: application/n-triples\n",
      "      profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "    http://pid.geoscience.gov.au/sample/AU1547827/pingback:\n",
      "      rel: http://www.w3.org/ns/prov#pingback\n"
     ]
    }
   ],
   "source": [
    "def _uriValue(v):\n",
    "    v = v.strip()\n",
    "    if v[0] != '<' and v[-1] != '>':\n",
    "        raise ValueError(f\"Not a URI: '{v}'\")\n",
    "    return v[1:-1]\n",
    "\n",
    "def _propValue(v):\n",
    "    v = v.strip()\n",
    "    try:\n",
    "        return _urivalue(v)\n",
    "    except:\n",
    "        pass\n",
    "    #Not a URI so must be a quoted thing.\n",
    "    if v[0] != '\"' and v[-1] != '\"':\n",
    "        raise ValueError(f\"Expected quoted value: '{v}'\")\n",
    "    return v[1:-1]\n",
    "    \n",
    "def parseLinkHeader(hv):\n",
    "    res = []\n",
    "    vals = hv.split(',')\n",
    "    for val in vals:\n",
    "        entry = {}\n",
    "        try:\n",
    "            props = val.split(\";\")\n",
    "            entry['uri'] = _uriValue(props[0])\n",
    "            for prop in props[1:]:\n",
    "                k,v = prop.strip().split(\"=\", 1)\n",
    "                entry[k] = _propValue(v)\n",
    "            res.append(entry)\n",
    "        except ValueError as e:\n",
    "            #Invalid header value, ignore\n",
    "            pass\n",
    "    return res\n",
    "        \n",
    "def printLinkHeaderEntries(entries, indent='    '):\n",
    "    for entry in entries:\n",
    "        for k,v in entry.items():\n",
    "            if k == 'uri':\n",
    "                print(f\"{indent}{v}:\")\n",
    "            else:\n",
    "                print(f\"{indent}  {k}: {v}\")\n",
    "                \n",
    "link_header_entries = parseLinkHeader(link_header_value)\n",
    "printLinkHeaderEntries(link_header_entries)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Request Resource with Profile and Serialization\n",
    "\n",
    "Now it becomes a bit clearer that the resource is available in several `alternate` renderings. The different types of rendering (i.e. the format of the resulting response) are:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Types of resource serialization available:\n",
      "\n",
      "text/n3\n",
      "text/html\n",
      "application/json\n",
      "application/n-triples\n",
      "text/xml\n",
      "application/ld+json\n",
      "application/xml\n",
      "text/n-triples\n",
      "text/turtle\n",
      "application/rdf+xml\n"
     ]
    }
   ],
   "source": [
    "resource_types = set()\n",
    "for entry in link_header_entries:\n",
    "    if entry['rel'] == 'alternate':\n",
    "        resource_types.add(entry['type'])\n",
    "print(\"Types of resource serialization available:\\n\")\n",
    "print(\"\\n\".join(resource_types))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "And the resource can be expressed using different profiles:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Profiles of resource available:\n",
      "\n",
      "http://schema.igsn.org/description/1.0\n",
      "http://purl.org/dc/terms/\n",
      "http://www.w3.org/ns/dx/conneg/altr\n",
      "http://schema.igsn.org/description/\n",
      "http://www.w3.org/ns/prov/\n",
      "http://www.w3.org/ns/sosa/\n",
      "https://w3id.org/profile/alt\n",
      "http://pid.geoscience.gov.au/def/ont/ga/igsn\n",
      "https://confluence.csiro.au/display/AusIGSN/CSIRO+IGSN+IMPLEMENTATION\n"
     ]
    }
   ],
   "source": [
    "resource_profiles = set()\n",
    "for entry in link_header_entries:\n",
    "    if entry['rel'] == 'alternate':\n",
    "        resource_profiles.add(entry['profile'])\n",
    "print(\"Profiles of resource available:\\n\")\n",
    "print(\"\\n\".join(resource_profiles))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Dublin Core as Turtle\n",
    "\n",
    "Hence to retrieve the resource as expressed in the Dubin Core profile and serialized as Turtle, we look in the Link header entries for `rel=alternate` and `type=text/turtle` and `profile=http://purl.org/dc/terms/`:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "URL = http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/turtle\n"
     ]
    }
   ],
   "source": [
    "def findUrl(entries, resource_profile, resource_type):\n",
    "    for entry in entries:\n",
    "        if entry['rel'] == 'alternate':\n",
    "            if entry['type'] == resource_type and entry['profile'] == resource_profile:\n",
    "                return entry['uri'] \n",
    "    return None\n",
    "\n",
    "resource_type = 'text/turtle'\n",
    "resource_profile = 'http://purl.org/dc/terms/'\n",
    "resource_url = findUrl(link_header_entries, resource_profile, resource_type)\n",
    "\n",
    "print(f\"URL = {resource_url}\")\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Retrieving the document from that URL provides the resource identified by the identifier AU1547827 expressed in the \n",
    "profile `http://purl.org/dc/terms/` and serialized as `text/turtle` results in the following Turtle, which is an alternate representation of the resource seen in the original web page:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "@prefix adms: <http://www.w3.org/ns/adms#> .\n",
      "@prefix aurole: <http://communications.data.gov.au/def/role/> .\n",
      "@prefix dct: <http://purl.org/dc/terms/> .\n",
      "@prefix foaf: <http://xmlns.com/foaf/0.1/> .\n",
      "@prefix geosp: <http://www.opengis.net/ont/geosparql#> .\n",
      "@prefix org: <http://www.w3.org/ns/org#> .\n",
      "@prefix prov: <http://www.w3.org/ns/prov#> .\n",
      "@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n",
      "@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n",
      "@prefix samfl: <http://def.seegrid.csiro.au/ontology/om/sam-lite#> .\n",
      "@prefix skos: <http://www.w3.org/2004/02/skos/core#> .\n",
      "@prefix xml: <http://www.w3.org/XML/1998/namespace> .\n",
      "@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n",
      "\n",
      "<http://pid.geoscience.gov.au/sample/AU1547827> a dct:PhysicalResource ;\n",
      "    rdfs:label \"Sample igsn:AU1547827\"^^xsd:string ;\n",
      "    dct:coverage \"<http://www.opengis.net/def/crs/EPSG/0/4283> POINT(117.733 -20.753)\"^^geosp:wktLiteral ;\n",
      "    dct:date \"2000-01-01\"^^xsd:date ;\n",
      "    dct:description \"Finely disseminated galena and nodular honey sphalerite in sericitically altered sandstone; core, acld 13 66.9\"^^xsd:string ;\n",
      "    dct:format <http://vocabulary.odm2.org/medium/unknown> ;\n",
      "    dct:identifier \"AU1547827\"^^xsd:string ;\n",
      "    dct:publisher <http://pid.geoscience.gov.au/org/ga/geoscienceaustralia> ;\n",
      "    dct:type <http://vocabulary.odm2.org/specimentype/theSpecimenTypeIsUnknown> ;\n",
      "    prov:pingback <http://pid.geoscience.gov.au/sample/AU1547827/pingback> .\n",
      "\n",
      "<http://pid.geoscience.gov.au/org/ga/geoscienceaustralia> a dct:Agent .\n",
      "\n",
      "\n"
     ]
    }
   ],
   "source": [
    "import requests\n",
    "response = requests.get(resource_url)\n",
    "print(response.text)\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Profiles x Type\n",
    "\n",
    "Note that as can be seen below, not all serializations are available for all types."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Profile: http://schema.igsn.org/description/1.0\n",
      "                text/xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-r1&_format=text/xml\n",
      "\n",
      "Profile: http://purl.org/dc/terms/\n",
      "                 text/n3 : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n3\n",
      "               text/html : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/html\n",
      "                text/xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/xml\n",
      "     application/ld+json : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/ld+json\n",
      "         application/xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/xml\n",
      "          text/n-triples : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/n-triples\n",
      "             text/turtle : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=text/turtle\n",
      "     application/rdf+xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=dct&_format=application/rdf+xml\n",
      "\n",
      "Profile: http://www.w3.org/ns/dx/conneg/altr\n",
      "                 text/n3 : http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/n3\n",
      "               text/html : http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/html\n",
      "        application/json : http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/json\n",
      "   application/n-triples : http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/n-triples\n",
      "     application/ld+json : http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/ld+json\n",
      "             text/turtle : http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=text/turtle\n",
      "     application/rdf+xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=all&_format=application/rdf+xml\n",
      "\n",
      "Profile: http://schema.igsn.org/description/\n",
      "                text/xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn&_format=text/xml\n",
      "\n",
      "Profile: http://www.w3.org/ns/prov/\n",
      "               text/html : http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/html\n",
      "     application/ld+json : http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/ld+json\n",
      "             text/turtle : http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=text/turtle\n",
      "     application/rdf+xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=prov&_format=application/rdf+xml\n",
      "\n",
      "Profile: http://www.w3.org/ns/sosa/\n",
      "     application/ld+json : http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/ld+json\n",
      "             text/turtle : http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=text/turtle\n",
      "     application/rdf+xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=sosa&_format=application/rdf+xml\n",
      "\n",
      "Profile: https://w3id.org/profile/alt\n",
      "                 text/n3 : http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/n3\n",
      "               text/html : http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/html\n",
      "        application/json : http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/json\n",
      "   application/n-triples : http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/n-triples\n",
      "     application/ld+json : http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/ld+json\n",
      "             text/turtle : http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=text/turtle\n",
      "     application/rdf+xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=alternates&_format=application/rdf+xml\n",
      "\n",
      "Profile: http://pid.geoscience.gov.au/def/ont/ga/igsn\n",
      "     application/ld+json : http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/ld+json\n",
      "             text/turtle : http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=text/turtle\n",
      "     application/rdf+xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=igsn-o&_format=application/rdf+xml\n",
      "\n",
      "Profile: https://confluence.csiro.au/display/AusIGSN/CSIRO+IGSN+IMPLEMENTATION\n",
      "                text/xml : http://pid.geoscience.gov.au/sample/AU1547827?_view=csirov3&_format=text/xml\n",
      "\n"
     ]
    }
   ],
   "source": [
    "for profile in resource_profiles:\n",
    "    print(f\"Profile: {profile}\")\n",
    "    for rtype in resource_types:\n",
    "        url = findUrl(link_header_entries, profile, rtype)\n",
    "        if not url is None:\n",
    "            print(f\"{rtype:>24} : {url}\")\n",
    "    print()\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}